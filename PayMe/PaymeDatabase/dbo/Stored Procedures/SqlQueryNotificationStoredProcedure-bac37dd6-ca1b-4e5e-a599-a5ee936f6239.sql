CREATE PROCEDURE [dbo].[SqlQueryNotificationStoredProcedure-bac37dd6-ca1b-4e5e-a599-a5ee936f6239] AS BEGIN BEGIN TRANSACTION; RECEIVE TOP(0) conversation_handle FROM [SqlQueryNotificationService-bac37dd6-ca1b-4e5e-a599-a5ee936f6239]; IF (SELECT COUNT(*) FROM [SqlQueryNotificationService-bac37dd6-ca1b-4e5e-a599-a5ee936f6239] WHERE message_type_name = 'http://schemas.microsoft.com/SQL/ServiceBroker/DialogTimer') > 0 BEGIN if ((SELECT COUNT(*) FROM sys.services WHERE name = 'SqlQueryNotificationService-bac37dd6-ca1b-4e5e-a599-a5ee936f6239') > 0)   DROP SERVICE [SqlQueryNotificationService-bac37dd6-ca1b-4e5e-a599-a5ee936f6239]; if (OBJECT_ID('SqlQueryNotificationService-bac37dd6-ca1b-4e5e-a599-a5ee936f6239', 'SQ') IS NOT NULL)   DROP QUEUE [SqlQueryNotificationService-bac37dd6-ca1b-4e5e-a599-a5ee936f6239]; DROP PROCEDURE [SqlQueryNotificationStoredProcedure-bac37dd6-ca1b-4e5e-a599-a5ee936f6239]; END COMMIT TRANSACTION; END
